process Reconstruct =
{
  block CategoriesAndModules =
  { 
    untracked vstring categories   =
    {
      "MinBiasTracking"
    }

    untracked vstring debugModules = 
    {
      "pixel3ProtoTracks",
      "pixelVertices",
      "pixel3PrimTracks", "primSeeds", "globalPrimTracks",
      "pixelSecoTracks",  "secoSeeds", "globalSecoTracks",
      "pixel2PrimTracks", "tertSeeds", "globalTertTracks",
      "pixelVZeros",
      "allTracks",
      "analyzeTracks"
    }
  }

  #############################################################################
  # Message logger
  service = MessageLogger
  {
#   using CategoriesAndModules
    untracked vstring destinations = { "cerr" }
    untracked PSet cerr =
    {
      untracked string threshold = "DEBUG"
      untracked PSet DEBUG = { untracked int32 limit = 0 }
    }
  }
  
  #############################################################################
  # Source
  source = PoolSource
  {
    untracked vstring fileNames =
    {
      // /MinBias/CSA08_STARTUP_V2_v1/RECO 
      //'file:/home/sikler/public/data/00ACF67A-251A-DD11-B39D-001D09F27003.root'

      // /RelValMinBias/CMSSW_2_0_0-RelVal-1208138424/RAW, 200 !!
      'file:/home/sikler/public/data/recHits_200.root'
//      'file:/home/sikler/public/data/raw_k0s.root'

      // /RelValMinbias/CMSSW_2_0_0_pre8-RelVal-1206883114-HLT/RECO, 200pre8
      //'file:/home/sikler/public/data/D6AF8ADB-3FFF-DC11-B094-001A92971B84.root'

      // private, 200pre8
      //'file:/home/sikler/public/data/recHits_200pre8_pt=1.root'
    }
    untracked uint32 skipEvents = 0
  }
  untracked PSet maxEvents = { untracked int32 input = -1 }

  #############################################################################
  # Beam spot
  include "RecoVertex/BeamSpotProducer/data/BeamSpotFakeConditionsEarlyCollision.cff"
  include "RecoVertex/BeamSpotProducer/data/BeamSpot.cfi"

  #############################################################################
  # Minimum bias tracking
  include "RecoPixelVertexing/PixelLowPtUtilities/data/MinBiasTracking.cff"

  #############################################################################
  # Energy loss
  module energyLoss = EnergyLossProducer
  {
    string trackProducer = "allTracks"
    double pixelToStripMultiplier = 1.23
    double pixelToStripExponent   = 1.
  }

  #############################################################################
  # Track analyzer
  include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"
  replace TrackAssociatorByHitsESProducer.SimToRecoDenominator = "reco"

  module analyzePixelTracks = TrackAnalyzer
  {
    string trackProducer = "pixel3ProtoTracks"
    string resultFile    = "resultPixelTracks.root"
  }

  module analyzeGlobalTracks = TrackAnalyzer
  {
    string trackProducer = "allTracks"
    string resultFile    = "resultGlobalTracks.root"
  }

  #############################################################################
  # Event plotter
  module plotEvent = EventPlotter
  {
    string trackProducer = "allTracks"
  }

  #############################################################################
  # Timing
//  module pts = PathTimerInserter { }
//  service    = PathTimerService  { }

//  untracked PSet options =
//  {
//    untracked bool wantSummary = true
//  }

  //  replace pixelVZeros.trackCollection = allTracks

  //include "RecoJets/Configuration/data/CaloTowersRec.cff"

  // Misalignment
//  include "Alignment/TrackerAlignment/data/10pbScenario.cff"
//  include "Alignment/TrackerAlignment/data/SurveyLASOnlyScenario.cff"
//  es_prefer MisalignedTracker = MisalignedTrackerESProducer { }

  #############################################################################
  # Path
  path p =
  {
//    towerMaker,
    offlineBeamSpot,
    minBiasTracking,
    energyLoss,
    pixelVZeros,
#   analyzePixelTracks,
    analyzeGlobalTracks
#    plotEvent
  }
}

